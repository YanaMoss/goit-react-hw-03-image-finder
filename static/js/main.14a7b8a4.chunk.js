(this["webpackJsonpgoit-react-hw-03-image-finder"]=this["webpackJsonpgoit-react-hw-03-image-finder"]||[]).push([[0],{33:function(e,t,n){},80:function(e,t,n){"use strict";n.r(t);var a,i=n(0),r=n.n(i),o=n(10),c=n.n(o),s=(n(33),n(34),n(35),n(6)),l=n(7),p=n(9),d=n(8),u=n(12),g=n(11),h=n.n(g),b=n(14),x=n(3),f=n(4),m=f.a.button(a||(a=Object(x.a)(["\n  padding: 8px 16px;\n  border-radius: 2px;\n  background-color: #3f51b5;\n  transition: all 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  text-align: center;\n  display: inline-block;\n  color: #fff;\n  border: 0;\n  text-decoration: none;\n  cursor: pointer;\n  font-family: inherit;\n  font-size: 18px;\n  line-height: 24px;\n  font-style: normal;\n  font-weight: 500;\n  min-width: 180px;\n  box-shadow: 0px 3px 1px -2px rgba(0, 0, 0, 0.2),\n    0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12);\n  &: :hover, :focus{\n   background-color: #303f9f;\n }\n"]))),j=n(1),y=function(e){var t=e.title,n=e.type,a=e.onClick;return Object(j.jsx)(m,{type:n,onClick:a,children:t})},O=n(17),v=n.n(O),w=n(27),k=n(13),S=n.n(k);S.a.defaults.baseURL="https://pixabay.com/api",S.a.defaults.params={image_type:"photo",key:"23643483-d75e612401c1d9a4094e2335a",per_page:12};var C,q,I,z,M,D,F,L,P,U=function(){var e=Object(w.a)(v.a.mark((function e(t){var n,a,i;return v.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.page,a=t.query,i=t.id,e.next=3,S.a.get("",{params:{page:n,q:a,id:i}});case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),E=U,T=f.a.ul(C||(C=Object(x.a)(["\n  display: grid;\n  max-width: calc(100vw - 48px);\n  grid-template-columns: repeat(auto-fill, minmax(320px, 1fr));\n  grid-gap: 16px;\n  margin-top: 0;\n  margin-bottom: 0;\n  padding: 0;\n  list-style: none;\n  margin-left: auto;\n  margin-right: auto;\n"]))),A=f.a.li(q||(q=Object(x.a)(["\n  border-radius: 2px;\n  box-shadow: 0px 1px 3px 0px rgba(0, 0, 0, 0.2),\n    0px 1px 1px 0px rgba(0, 0, 0, 0.14), 0px 2px 1px -1px rgba(0, 0, 0, 0.12);\n  &:hover {\n    transform: scale(1.03);\n    cursor: zoom-in;\n  }\n"]))),B=function(e){var t=e.id,n=e.url,a=e.name,i=e.getImage;return Object(j.jsx)(A,{id:t,onClick:function(e){return i(e.currentTarget.id)},children:Object(j.jsx)("img",{src:n,alt:a,width:"400",height:"250",className:"ImageGalleryItem-image"})},t)},H=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={images:[],page:1,total:"",loading:!1},e.getImage=function(t){e.props.onClick(t)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=e.query,i=this.props.query,r=t.page,o=this.state.page;a!==i&&(this.setState({loading:!0}),E({page:this.state.page,query:i}).then((function(e){return n.setState({images:Object(b.a)(e.data.hits),total:e.data.totalHits})})).finally((function(){return n.setState({loading:!1})}))),r<o&&(this.setState({loading:!0}),E({page:o,query:a}).then((function(e){return n.setState({images:[].concat(Object(b.a)(t.images),Object(b.a)(e.data.hits))})})).finally((function(){return n.setState({loading:!1})}))),window.scrollTo({top:document.documentElement.scrollHeight,behavior:"smooth"})}},{key:"nextPage",value:function(){var e=this.state.page+1;this.setState({page:e})}},{key:"render",value:function(){var e=this,t=this.state,n=t.images,a=t.loading,i=t.total;return Object(j.jsxs)("div",{children:[a&&Object(j.jsx)(h.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3}),Object(j.jsx)(T,{children:n.map((function(t){var n=t.id,a=t.largeImageURL,i=t.tags;return Object(j.jsx)(B,{id:n,url:a,name:i,getImage:e.getImage})}))}),n.length<i&&Object(j.jsx)(y,{type:"button",title:"Load more",onClick:function(){return e.nextPage()}})]})}}]),n}(i.Component),K=f.a.div(I||(I=Object(x.a)(["\n  position: fixed;\n  top: 0;\n  left: 0;\n  width: 100vw;\n  height: 100vh;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  background-color: rgba(0, 0, 0, 0.8);\n  z-index: 1200;\n"]))),R=f.a.div(z||(z=Object(x.a)(["\n  max-width: calc(100vw - 48px);\n  max-height: calc(100vh - 24px);\n"]))),J=document.querySelector("#modal-root"),_=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).handleKeyDown=function(t){"Escape"===t.code&&e.props.onClose()},e.handleOverlayClick=function(t){t.currentTarget===t.target&&e.props.onClose()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.handleKeyDown)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.handleKeyDown)}},{key:"render",value:function(){return Object(o.createPortal)(Object(j.jsx)(K,{onClick:this.handleOverlayClick,children:Object(j.jsxs)(R,{children:[this.props.children," "]})}),J)}}]),n}(i.Component),G=f.a.header(M||(M=Object(x.a)(["\n  top: 0;\n  left: 0;\n  position: sticky;\n  z-index: 1100;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  min-height: 64px;\n  padding-right: 24px;\n  padding-left: 24px;\n  padding-top: 12px;\n  padding-bottom: 12px;\n  color: #fff;\n  background-color: #3f51b5;\n  box-shadow: 0px 2px 4px -1px rgba(0, 0, 0, 0.2),\n    0px 4px 5px 0px rgba(0, 0, 0, 0.14), 0px 1px 10px 0px rgba(0, 0, 0, 0.12);\n"]))),N=f.a.form(D||(D=Object(x.a)(["\n  display: flex;\n  align-items: center;\n  width: 100%;\n  max-width: 600px;\n  background-color: #fff;\n  border-radius: 3px;\n  overflow: hidden;\n"]))),W=f.a.button(F||(F=Object(x.a)(["\n  display: inline-block;\n  width: 48px;\n  height: 48px;\n  border: 0;\n  background-image: url('https://image.flaticon.com/icons/svg/149/149852.svg');\n  background-size: 40%;\n  background-repeat: no-repeat;\n  background-position: center;\n  opacity: 0.6;\n  transition: opacity 250ms cubic-bezier(0.4, 0, 0.2, 1);\n  cursor: pointer;\n  outline: none;\n  &:hover {\n    opacity: 1;\n  }\n"]))),Q=f.a.span(L||(L=Object(x.a)(["\n  position: absolute;\n  width: 1px;\n  height: 1px;\n  padding: 0;\n  overflow: hidden;\n  clip: rect(0, 0, 0, 0);\n  white-space: nowrap;\n  clip-path: inset(50%);\n  border: 0;\n"]))),V=f.a.input(P||(P=Object(x.a)(["\n  display: inline-block;\n  width: 100%;\n  font: inherit;\n  font-size: 20px;\n  border: none;\n  outline: none;\n  padding-left: 4px;\n  padding-right: 4px;\n  &::placeholder {\n    font: inherit;\n    font-size: 18px;\n  }\n"]))),X=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={query:""},e.handleChange=function(t){e.setState({query:t.currentTarget.value.replace(" ","+")})},e.handleSubmit=function(t){var n=e.state.query;t.preventDefault(),""!==e.state.query.trim()?e.props.onSubmit(n):u.b.info("\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u0442\u0435\u043a\u0441 \u0434\u043b\u044f \u043f\u043e\u0438\u0441\u043a\u0430.")},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(j.jsx)(G,{children:Object(j.jsxs)(N,{onSubmit:this.handleSubmit,children:[Object(j.jsx)(W,{type:"submit",children:Object(j.jsx)(Q,{children:"Search"})}),Object(j.jsx)(V,{type:"text",autocomplete:"off",autofocus:!0,placeholder:"Search images and photos",onChange:this.handleChange})]})})}}]),n}(i.Component),Y=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(e=t.call.apply(t,[this].concat(i))).state={query:"",openModal:!1,loading:!1,image:{id:"",url:"",name:""}},e.handleImage=function(t){e.setState({query:t})},e.toggleModal=function(){e.setState((function(e){return{openModal:!e.openModal}}))},e.getImage=function(t){e.setState({image:{id:t}})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this,a=this.state.image.id;t.image.id!==this.state.image.id&&(this.setState({loading:!0}),E({id:a}).then((function(e){return n.setState({openModal:!0,image:{id:e.data.hits[0].id,url:e.data.hits[0].largeImageURL,name:e.data.hits[0].tags}})})).finally((function(){return n.setState({loading:!1})})))}},{key:"render",value:function(){var e=this,t=this.state.image,n=t.url,a=t.name,i=this.state,r=i.loading,o=i.query,c=i.openModal;return Object(j.jsxs)("div",{children:[Object(j.jsx)(X,{onSubmit:this.handleImage}),Object(j.jsx)(H,{query:o,onClick:function(t){return e.getImage(t)}}),c&&Object(j.jsx)(_,{onClose:this.toggleModal,children:Object(j.jsx)("img",{src:n,alt:a,openImage:this.openImage})}),Object(j.jsx)(u.a,{position:"top-right",autoClose:5e3,hideProgressBar:!1,newestOnTop:!1,closeOnClick:!0,rtl:!1,pauseOnFocusLoss:!0,draggable:!0,pauseOnHover:!0}),r&&Object(j.jsx)(h.a,{type:"Puff",color:"#00BFFF",height:100,width:100,timeout:3e3})]})}}]),n}(i.Component);c.a.render(Object(j.jsx)(r.a.StrictMode,{children:Object(j.jsx)(Y,{})}),document.getElementById("root"))}},[[80,1,2]]]);
//# sourceMappingURL=main.14a7b8a4.chunk.js.map